version: 1
services:
  - type: web
    name: thestarfeel-ai-consultation
    runtime: node
    plan: starter
    rootDir: server

    buildCommand: npm install
    startCommand: npm start

    autoDeploy: true
    healthCheckPath: /health

    envVars:
      - key: OPENAI_API_KEY
        sync: false

      - key: TEXT_MODEL
        value: gpt-4.1-mini

      - key: IMAGE_MODEL
        value: gpt-image-1

      - key: IMAGE_SIZE
        value: 1024x1024

      - key: IMAGE_QUALITY
        value: high

      - key: STORE_CONSULTATIONS
        value: "true"

      - key: STORE_IMAGES
        value: "false"

      - key: ALLOWED_ORIGINS
        value: https://thestarfeel-3.myshopify.com
